<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:collections="using:System.Collections"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:helpers="using:ModerationApp.Helpers"
             xmlns:lvc="using:LiveChartsCore.SkiaSharpView.Avalonia"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:ModerationApp.ViewModels"
             xmlns:models="using:ModerationApp.Models"
             mc:Ignorable="d" d:DesignWidth="1920" d:DesignHeight="1080"
             x:Class="ModerationApp.DashboardPage"
             x:DataType="vm:DashboardViewModel">

    <UserControl.Resources>
        <helpers:StringEqualConverterHelper x:Key="StringEqualsConverter"/>
    </UserControl.Resources>

	<Border Background="#0F0F10">
        <DockPanel HorizontalAlignment="Stretch" 
                   VerticalAlignment="Stretch"
                   LastChildFill="True">
            <!--Header !-->
			<Border Height="85" DockPanel.Dock="Top" 
               BorderBrush="#2A2A2D" 
               BorderThickness="0,0,0,1">
                <StackPanel Orientation="Vertical">
					<TextBlock Text="Dashboard" 
                       VerticalAlignment="Center" 
                       HorizontalAlignment="Left" 
                       Foreground="White"
                       FontWeight="DemiBold"
                       Margin="20,20,0,0"
                       FontSize="20"/>
                    <TextBlock Text="Server Statistics and recent activity overview" 
                       VerticalAlignment="Center" 
                       HorizontalAlignment="Left" 
                       Foreground="Gray"
                       Margin="20,2,0,0"   
                       FontSize="14"/>
                </StackPanel>
            </Border>
			<Border Margin="0,0,0,20">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
					<Grid>
						<Grid.RowDefinitions>
							<RowDefinition Height="AUTO"/>
							<RowDefinition Height="AUTO"/>
							<RowDefinition Height="AUTO"/>
                        </Grid.RowDefinitions>

                        <!--Regular Statistics-->
                        <Grid Grid.Row="0" Grid.ColumnDefinitions="*,*,*" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="75,20,75,0" ColumnSpacing="50"> 
							<Border Grid.Column="0" Background="#222325" CornerRadius="15">
                                <Grid Grid.ColumnDefinitions="*, Auto">
                                    <StackPanel Grid.Column="0" Orientation="Vertical" VerticalAlignment="Center" HorizontalAlignment="Left">
										<TextBlock 
                                        Text="New Players"
                                        Foreground="Gray"
                                        FontSize="15"
                                        Margin="20,20,0,0"/>
										<TextBlock 
                                        Text="1"
                                        Foreground="White"
                                        FontSize="24"
                                        FontWeight="SemiBold"
                                        Margin="20,10,0,20"/>
                                    </StackPanel>
                                    <Image Source="/Assets/logs.png" Grid.Column="1"
                                           Width="75"
                                           Height="75"
                                           Margin="0,0,5,0"
                                           VerticalAlignment="Center"
                                           HorizontalAlignment="Right"/>
                                </Grid>
                            </Border>

                           <Border Grid.Column="1" Background="#222325" CornerRadius="15">
                                <Grid Grid.ColumnDefinitions="*, Auto">
                                    <StackPanel Grid.Column="0" Orientation="Vertical" VerticalAlignment="Center" HorizontalAlignment="Left">
										<TextBlock 
                                        Text="Total Punishments"
                                        Foreground="Gray"
                                        FontSize="15"
                                        Margin="20,20,0,0"/>
										<TextBlock 
                                        Text="1"
                                        Foreground="White"
                                        FontSize="24"
                                        FontWeight="SemiBold"
                                        Margin="20,10,0,20"/>
                                    </StackPanel>
                                    <Image Source="/Assets/logs.png" Grid.Column="1"
                                           Width="75"
                                           Height="75"
                                           Margin="0,0,5,0"
                                           VerticalAlignment="Center"
                                           HorizontalAlignment="Right"/>
                                </Grid>
                            </Border>

                            <Border Grid.Column="2" Background="#222325" CornerRadius="15">
                                <Grid Grid.ColumnDefinitions="*, Auto">
                                    <StackPanel Grid.Column="0" Orientation="Vertical" VerticalAlignment="Center" HorizontalAlignment="Left">
										<TextBlock 
                                        Text="Active Bans"
                                        Foreground="Gray"
                                        FontSize="15"
                                        Margin="20,20,0,0"/>
										<TextBlock 
                                        Text="1"
                                        Foreground="White"
                                        FontSize="24"
                                        FontWeight="SemiBold"
                                        Margin="20,10,0,20"/>
                                    </StackPanel>
                                    <Image Source="/Assets/logs.png" Grid.Column="1"
                                           Width="75"
                                           Height="75"
                                           Margin="0,0,5,0"
                                           VerticalAlignment="Center"
                                           HorizontalAlignment="Right"/>
                                </Grid>
                            </Border>
                        </Grid>


                        <!--Graphs!-->
                       <Grid Grid.Row="1" Grid.ColumnDefinitions="*, *" Margin="75,40,75,0" ColumnSpacing="75" VerticalAlignment="Stretch">
							<Border Background="#222325" CornerRadius="15" Grid.Column="0" Padding="15" MinHeight="300" Height="300" VerticalAlignment="Top">
                                <Grid RowDefinitions="Auto, *">
                                    <TextBlock Text="Punishments (Last 7 Days)"
                                               FontWeight="SemiBold"
                                               Foreground="White"
                                               FontSize="16"
                                               Margin="0,0,0,10"/>

                                    <lvc:CartesianChart Grid.Row="1" Background="#191A1C" Margin="0,0,0,10">
                                        <lvc:CartesianChart.Series>
                                            <lvc:XamlColumnSeries Values="{Binding Values}" />
                                        </lvc:CartesianChart.Series>

                                        <lvc:CartesianChart.XAxes>
                                            <lvc:XamlAxis Labels="{Binding DaysOfWeek}" />
                                        </lvc:CartesianChart.XAxes>
                                    </lvc:CartesianChart>
                                </Grid>
                            </Border>
							<Border Background="#222325" CornerRadius="15" Grid.Column="1" Padding="15" MinHeight="300" Height="300" VerticalAlignment="Top">
                                <Grid RowDefinitions="Auto, *">
                                    <TextBlock Text="Punishment Distribution"
                                               FontWeight="SemiBold"
                                               Foreground="White"
                                               FontSize="16"
                                               Margin="0,0,0,10"/>

                                    <lvc:PieChart Grid.Row="1" Background="#191A1C" Margin="0,0,0,10" SeriesSource="{Binding Data}" LegendPosition="Bottom">
                                        <lvc:PieChart.SeriesTemplate>
                                            <DataTemplate x:DataType="models:PieData">
                                                <lvc:XamlPieSeries
                                                    SeriesName="{Binding Name}"
                                                    Values="{Binding Values}"
                                                    MaxRadialColumnWidth="60"/>
                                            </DataTemplate>
                                        </lvc:PieChart.SeriesTemplate>
                                    </lvc:PieChart>
                                </Grid>
                            </Border>
                        </Grid>

                        <!-- Recent Punishments -->

                        <Border Background="#222325" CornerRadius="15" Grid.Row="2" Padding="0" Margin="75,40,75,0" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
							<Grid Grid.RowDefinitions="*,*,*">
                                <Grid Grid.Row="0" Grid.ColumnDefinitions="*, Auto" Margin="0,0,0,0">
                                    <TextBlock Text="Recent Moderation Actions"
                                           FontSize="16"
                                           FontWeight="SemiBold"
                                           Padding="15"
                                           Grid.Column="0"/>
                                    <TextBlock Text="View All" 
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           FontSize="14"
                                           Foreground="SkyBlue"
                                           Cursor="Hand"
                                           Padding="15"
                                           Grid.Column="1"
                                           PointerPressed="ViewAllPunishments_Clicked"/>
                                </Grid>
                                
                                <Border Background="#191A1C" Grid.Row="1">
									<Grid Grid.Row="1" Grid.ColumnDefinitions="*, *, *, *, *" Margin="15,10,0,10">
                                        <TextBlock Text="OFFENDER" 
                                                   Grid.Column="0"
                                                   HorizontalAlignment="Left"
                                                   VerticalAlignment="Center"
                                                   Foreground="Gray"
                                                   FontSize="12"/>
                                        <TextBlock Text="TYPE" 
                                                   Grid.Column="1"
                                                   HorizontalAlignment="Left"
                                                   VerticalAlignment="Center"
                                                   Foreground="Gray"
                                                   FontSize="12"/>
                                        <TextBlock Text="REASON" 
                                                   Grid.Column="2"
                                                   HorizontalAlignment="Left"
                                                   VerticalAlignment="Center"
                                                   Foreground="Gray"
                                                   FontSize="12"/>
                                        <TextBlock Text="ISSUER" 
                                                   Grid.Column="3"
                                                   HorizontalAlignment="Left"
                                                   VerticalAlignment="Center"
                                                   Foreground="Gray"
                                                   FontSize="12"/>
                                        <TextBlock Text="DATE" 
                                                   Grid.Column="4"
                                                   HorizontalAlignment="Left"
                                                   VerticalAlignment="Center"
                                                   Foreground="Gray"
                                                   FontSize="12"/>
                                    </Grid>

                                </Border>
                            
                                <ItemsControl Grid.Row="2" ItemsSource="{Binding RecentModerationActions}">
									<ItemsControl.ItemTemplate>
										<DataTemplate x:DataType="models:RecentModeration">
                                            <Border BorderBrush="#2A2A2D" BorderThickness="0,0,0,1">
                                                <Grid Grid.ColumnDefinitions="*, *, *, *, *" Margin="15,10,0,10">
												    <TextBlock Grid.Column="0" Cursor="Hand" Text="{Binding Offender}" FontSize="14" FontWeight="SemiBold" />
                                                        <Border Grid.Column="1"
                                                            HorizontalAlignment="Left"
                                                            VerticalAlignment="Center"
                                                            CornerRadius="6"
                                                            Padding="8,3"
                                                            Classes.warning="{Binding Type, Converter={StaticResource StringEqualsConverter}, ConverterParameter=Warning}"
                                                            Classes.kick="{Binding Type, Converter={StaticResource StringEqualsConverter}, ConverterParameter=Kick}"
                                                            Classes.ban="{Binding Type, Converter={StaticResource StringEqualsConverter}, ConverterParameter=Ban}"
                                                            Classes.notation="{Binding Type, Converter={StaticResource StringEqualsConverter}, ConverterParameter=Notation}"
                                                            Classes.commendation="{Binding Type, Converter={StaticResource StringEqualsConverter}, ConverterParameter=Commendation}"
                                                            Classes.mute="{Binding Type, Converter={StaticResource StringEqualsConverter}, ConverterParameter=Mute}">
                                                        <Border.Styles>
                                                            <Style Selector="Border.warning">
                                                                <Setter Property="Background" Value="#1Aeab308"/>
                                                            </Style>
                                                            <Style Selector="Border.kick">
                                                                <Setter Property="Background" Value="#1Af97316"/>
                                                            </Style>
                                                            <Style Selector="Border.ban">
                                                                <Setter Property="Background" Value="#1Aef4444"/>
                                                            </Style>
                                                            <Style Selector="Border.notation">
                                                                <Setter Property="Background" Value="#1A3b82f6"/>
                                                            </Style>
                                                            <Style Selector="Border.commendation">
                                                                <Setter Property="Background" Value="#1A22c55e"/>
                                                            </Style>
                                                            <Style Selector="Border.mute">
                                                                <Setter Property="Background" Value="#1A0E94B5"/>
                                                            </Style>
                                                        </Border.Styles>
                                                        <TextBlock Text="{Binding Type}" 
                                                                   FontSize="11" 
                                                                   FontWeight="SemiBold"
                                                                   Classes.warning="{Binding Type, Converter={StaticResource StringEqualsConverter}, ConverterParameter=Warning}"
                                                                   Classes.kick="{Binding Type, Converter={StaticResource StringEqualsConverter}, ConverterParameter=Kick}"
                                                                   Classes.ban="{Binding Type, Converter={StaticResource StringEqualsConverter}, ConverterParameter=Ban}"
                                                                   Classes.notation="{Binding Type, Converter={StaticResource StringEqualsConverter}, ConverterParameter=Notation}"
                                                                   Classes.commendation="{Binding Type, Converter={StaticResource StringEqualsConverter}, ConverterParameter=Commendation}"
                                                                   Classes.mute="{Binding Type, Converter={StaticResource StringEqualsConverter}, ConverterParameter=Mute}">
                                                            <TextBlock.Styles>
                                                                <Style Selector="TextBlock.warning">
                                                                    <Setter Property="Foreground" Value="#eab308"/>
                                                                </Style>
                                                                <Style Selector="TextBlock.kick">
                                                                    <Setter Property="Foreground" Value="#f97316"/>
                                                                </Style>
                                                                <Style Selector="TextBlock.ban">
                                                                    <Setter Property="Foreground" Value="#ef4444"/>
                                                                </Style>
                                                                <Style Selector="TextBlock.notation">
                                                                    <Setter Property="Foreground" Value="#3b82f6"/>
                                                                </Style>
                                                                <Style Selector="TextBlock.commendation">
                                                                    <Setter Property="Foreground" Value="#22c55e"/>
                                                                </Style>
                                                                <Style Selector="TextBlock.mute">
                                                                    <Setter Property="Foreground" Value="#0E94B5"/>
                                                                </Style>
                                                            </TextBlock.Styles>
                                                        </TextBlock>
                                                    </Border>
												    <TextBlock Grid.Column="2" Text="{Binding Reason}" FontSize="12"/>
												    <TextBlock Grid.Column="3" Text="{Binding Issuer}" FontSize="12"/>
												    <TextBlock Grid.Column="4" Text="{Binding Date}" FontSize="12"/>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </Grid>
                        </Border>
                    </Grid>
                </ScrollViewer>
            </Border>

        </DockPanel>
	</Border>
</UserControl>
